[{"title": "List users by the number of sites registered with a given tag", "tags": ["sites", "users", "tags"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT ?creator (COUNT(?site) AS ?site_count) WHERE {\n  BIND(<https://fornpunkt.se/tagg/stensattning> AS ?tag)\n  ?site schema:keywords ?tag ;\n        a schema:CreativeWork ;\n        schema:creator ?creator .\n}\nGROUP BY ?creator\nORDER BY DESC(?site_count)\n"}, {"title": "List corresponding event types in the FISH Event Types Thesaurus", "tags": ["observation-types"], "body": "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX schema: <http://schema.org/>\nPREFIX oa: <http://www.w3.org/ns/oa#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n\nSELECT * WHERE {\n  ?observation_type rdfs:subClassOf schema:Event ;\n                    rdfs:label ?observation_type_name .\n  \n  OPTIONAL {\n    ?observation_type schema:sameAs ?fish_event_type .\n    SERVICE <https://heritagedata.org/live/sparql.php> {\n      ?fish_event_type skos:prefLabel ?fish_event_label .\n    }\n  }\n}\n"}, {"title": "Get comments containing a question mark", "tags": ["comments"], "body": "PREFIX oa: <http://www.w3.org/ns/oa#>\n\nSELECT * WHERE {\n  ?comment oa:motivatedBy oa:commenting ;\n              oa:bodyValue ?content .\n\n  FILTER(CONTAINS(?content, \"?\"))\n}\n"}, {"title": "Check if a given KMR site has comments", "tags": ["kmr", "comments"], "body": "PREFIX oa: <http://www.w3.org/ns/oa#>\n\nASK {\n  ?annotation oa:hasTarget <http://kulturarvsdata.se/raa/lamning/504f34e4-89be-46dd-8c6f-6b466824d111> ;\n              oa:motivatedBy oa:commenting .\n}\n"}, {"title": "Sites with questionmarks in the title", "tags": ["sites"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT * WHERE {\n  ?site a schema:CreativeWork ;\n       schema:name ?name .\n\n  FILTER(CONTAINS(?name, '?'))\n}"}, {"title": "Given a KMR site get the corresponding Wikidata tag", "tags": ["kmr", "wikidata"], "body": "PREFIX schema: <http://schema.org/>\nPREFIX oa: <http://www.w3.org/ns/oa#>\n\nSELECT ?wikidata WHERE {\n  ?annotation oa:hasTarget <http://kulturarvsdata.se/raa/lamning/401055fc-e795-4e2c-8e34-c45dfde18e61> ;\n              oa:hasBody ?body .\n  ?body schema:subjectOf ?target .\n\n  SERVICE <https://query.wikidata.org/sparql> {\n    ?target schema:about ?wikidata .\n  }\n}\n"}, {"title": "List tags used together with a given tag", "tags": ["tags"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT DISTINCT ?other_tags ?name WHERE {\n  BIND(<https://fornpunkt.se/tagg/stensattning> AS ?tag)\n  ?site schema:keywords ?tag ;\n        schema:keywords ?other_tags .\n  ?other_tags schema:name ?name .\n\n  MINUS {\n    ?tag schema:name ?origin_tag_name .\n    ?other_tags schema:name ?origin_tag_name .\n  }\n}\n"}, {"title": "List tags without Wikipedia articles", "tags": ["tags", "maintenance"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT * WHERE {\n  ?tag a schema:DefinedTerm ;\n       schema:name ?name .\n\n  OPTIONAL { ?tag schema:description ?description }\n\n  MINUS { ?tag schema:subjectOf [] }\n}\n"}, {"title": "List users by the number of sites registered", "tags": ["sites", "users"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT ?creator (COUNT(?site) AS ?site_count) WHERE {\n  ?site a schema:CreativeWork ;\n        schema:creator ?creator .\n}\nGROUP BY ?creator\nORDER BY DESC(?site_count)\n"}, {"title": "Distribution of observation types for a given user", "tags": ["observation-types", "users"], "body": "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX schema: <http://schema.org/>\n\nSELECT ?label (COUNT(?observation_type) AS ?count) WHERE {\n  ?site schema:creator \"abbe\"@sv ;\n        schema:event ?event .\n\n  ?event a ?observation_type .\n  ?observation_type rdfs:label ?label .\n}\nGROUP BY ?label\nORDER BY DESC(?observation_type_count)\n"}, {"title": "List sites with a given title", "tags": ["sites"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT * WHERE {\n  ?site a schema:CreativeWork ;\n        schema:name 'Stens\u00e4ttning'@sv .\n}\n"}, {"title": "Lists tags and their corresponding Wikidata item", "tags": ["tags", "wikidata"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT ?tag ?wikidata WHERE {\n  ?tag a schema:DefinedTerm ;\n       schema:subjectOf ?wikipedia .\n\n  SERVICE <https://query.wikidata.org/sparql> {\n    ?wikipedia schema:about ?wikidata .\n  }\n}"}, {"title": "List sites registered by a given user", "tags": ["sites", "users"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT * WHERE {\n  ?site a schema:CreativeWork ;\n        schema:creator 'abbe'@sv ;\n        schema:name ?site_title .\n}\n"}, {"title": "List tags without descriptions", "tags": ["tags", "maintenance"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT * WHERE {\n  ?tag a schema:DefinedTerm ;\n       schema:name ?name .\n\n  OPTIONAL { ?tag schema:subjectOf ?wikipedia }\n\n  MINUS { ?tag schema:description [] }\n}\n"}, {"title": "Render all sites with a given tag on a map", "tags": ["sites", "map"], "body": "PREFIX schema: <http://schema.org/>\n\nSELECT ?site ?geometry ?geometryColor ?geometryOpacity WHERE {\n  ?site schema:keywords <https://fornpunkt.se/tagg/skurvandring> ;\n        schema:contentLocation ?place .\n  ?place schema:geo ?geometry_node .\n\n  OPTIONAL {\n    ?geometry_node schema:polygon|schema:line ?geometry .\n  }\n\n  OPTIONAL {\n    ?geometry_node schema:latitude ?lat .\n    ?geometry_node schema:longitude ?lon .\n\n    BIND(CONCAT(STR(?lat), \",\", STR(?lon)) AS ?geometry)\n  }\n\n  BIND(\"#30638E\" AS ?geometryColor)\n  BIND(0.4 AS ?geometryOpacity)\n}\n"}, {"title": "Get comments by user", "tags": ["comments", "users"], "body": "PREFIX dc: <http://purl.org/dc/terms/>\nPREFIX oa: <http://www.w3.org/ns/oa#>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\n\nSELECT ?comment ?content WHERE {\n  ?comment a oa:Annotation ;\n           oa:motivatedBy oa:commenting ;\n           dc:creator ?creator .\n\n  ?creator foaf:name \"abbe\" .\n\n  ?comment oa:bodyValue ?content .\n}\nLIMIT 10\n"}]